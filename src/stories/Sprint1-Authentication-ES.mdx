---
title: 'User Stories/Sprint 1 - Authentication (ES)'
---

# Sprint 1: AutenticaciÃ³n y Fundamentos

**DuraciÃ³n**: 23-30 de diciembre, 2024  
**Objetivo**: Sistema de autenticaciÃ³n funcional end-to-end  
**Entregable**: Los usuarios pueden registrarse, iniciar sesiÃ³n y ver pÃ¡ginas pÃºblicas bÃ¡sicas

## ğŸ“‹ Historias de Usuario

### US-010: Registro/Login con VerificaciÃ³n por Email

**Como** usuario (comprador/vendedor/admin)  
**Quiero** registrarme e iniciar sesiÃ³n con validaciÃ³n por email  
**Para que** se asegure la integridad de las cuentas

#### Criterios de AceptaciÃ³n
- âœ… El endpoint de registro crea un usuario pendiente de verificaciÃ³n
- âœ… Se envÃ­a email de verificaciÃ³n
- âœ… El endpoint de verificaciÃ³n activa la cuenta
- âœ… El login bloquea usuarios no verificados
- âœ… Tokens con expiraciÃ³n y refresh
- âœ… Validaciones: email Ãºnico, contraseÃ±a mÃ­nima
- âœ… API documentada en Swagger

#### Componentes
- [PÃ¡gina de Login](?path=/story/auth-login--default)
- [Flujo de Registro](?path=/story/auth-registerflow--complete-flow)
- [OlvidÃ© mi ContraseÃ±a](?path=/story/auth-forgotpassword--default)
- [Restablecer ContraseÃ±a](?path=/story/auth-resetpassword--default)

---

### US-011: UI de Registro/Login

**Como** usuario  
**Quiero** una UI clara de registro/login con manejo de estados  
**Para que** pueda acceder a la plataforma sin fricciÃ³n

#### Criterios de AceptaciÃ³n
- âœ… Pantallas: registro, login, verificaciÃ³n
- âœ… Validaciones del cliente: email, contraseÃ±a
- âœ… Mensajes de error claros
- âœ… Estados de carga
- âœ… Las rutas protegidas redirigen al login

#### Componentes
- [Selector de Tipo de Cuenta](?path=/story/auth-shared-accounttypeselector--default)
- [Pasos de Registro Comprador](?path=/story/auth-buyer-step1personalinfo--default)
- [Registro Vendedor (Natural)](?path=/story/auth-seller-natural-naturalsellerflow--default)
- [Registro Vendedor (JurÃ­dica)](?path=/story/auth-seller-juridica-juridicasellerflow--default)

---

### US-012: Roles y Permisos (RBAC)

**Como** sistema  
**Quiero** manejo de roles (admin, vendedor, comprador)  
**Para que** los permisos sean controlados por mÃ³dulo

#### Criterios de AceptaciÃ³n
- âœ… Roles definidos: admin, seller, buyer
- âœ… Middleware controla acceso a endpoints
- âœ… Pruebas de autorizaciÃ³n
- âœ… Errores 401/403 estandarizados

#### ImplementaciÃ³n
- Backend: Middleware basado en roles
- Frontend: Guardias de ruta y renderizado condicional

---

### US-013: UI Adaptada a Rol

**Como** admin/vendedor/comprador  
**Quiero** ver menÃºs y rutas segÃºn mi rol  
**Para que** se evite el acceso no autorizado

#### Criterios de AceptaciÃ³n
- âœ… El menÃº varÃ­a segÃºn el rol
- âœ… La ruta prohibida muestra 403
- âœ… El rol persiste en la sesiÃ³n
- âœ… Pruebas de navegaciÃ³n por rol

#### Componentes
- [Encabezado del Dashboard](?path=/story/ui-dashboardheader--default) - Muestra diferentes opciones por rol

---

### US-009: Restablecimiento de ContraseÃ±a

**Como** usuario  
**Quiero** restablecer mi contraseÃ±a si la olvido  
**Para que** pueda recuperar el acceso a mi cuenta

#### Criterios de AceptaciÃ³n
- âœ… Formulario de olvidÃ© mi contraseÃ±a
- âœ… Email con enlace de restablecimiento
- âœ… ValidaciÃ³n segura del token
- âœ… Formulario de nueva contraseÃ±a
- âœ… Requisitos de contraseÃ±a aplicados

#### Componentes
- [OlvidÃ© mi ContraseÃ±a](?path=/story/auth-forgotpassword--default)
- [Restablecer ContraseÃ±a](?path=/story/auth-resetpassword--default)
- [Input de ContraseÃ±a](?path=/story/ui-passwordinput--default)
- [Tooltip de Requisitos de ContraseÃ±a](?path=/story/ui-passwordrequirementstooltip--default)

---

## ğŸ¨ Componentes del Sistema de DiseÃ±o

### Componentes de Formulario
- [BotÃ³n](?path=/story/ui-button--default)
- [Input](?path=/story/ui-input--default)
- [Input de ContraseÃ±a](?path=/story/ui-passwordinput--default)
- [Campo de Formulario](?path=/story/ui-formfield--default)

### Componentes de RetroalimentaciÃ³n
- [Spinner](?path=/story/ui-spinner--default)
- [Indicador de Estado de Red](?path=/story/shared-networkstatusindicator--default)

### Componentes de Layout
- [Card](?path=/story/ui-card--default)
- [Modal](?path=/story/ui-modal--default)

---

## ğŸ”’ CaracterÃ­sticas de Seguridad

### Implementadas
- âœ… VerificaciÃ³n de email requerida
- âœ… Requisitos de fortaleza de contraseÃ±a
- âœ… Tokens JWT con expiraciÃ³n
- âœ… Mecanismo de refresh token
- âœ… HTTPS forzado
- âœ… CORS configurado
- âœ… ProtecciÃ³n XSS
- âœ… ProtecciÃ³n CSRF

### Planificadas
- â³ ReCaptcha v3 (US-014)
- â³ LimitaciÃ³n de tasa
- â³ 2FA (Fase 2)

---

## ğŸ“Š Cobertura de Pruebas

### Pruebas Unitarias
- âœ… LÃ³gica de validaciÃ³n de formularios
- âœ… Verificador de fortaleza de contraseÃ±a
- âœ… Utilidades de tokens

### Pruebas de IntegraciÃ³n
- âœ… Flujo de registro
- âœ… Flujo de login
- âœ… Flujo de restablecimiento de contraseÃ±a

### Pruebas E2E
- â³ Recorrido completo del usuario
- â³ Acceso basado en roles

---

## ğŸš€ Estado del Despliegue

- âœ… **Desarrollo**: Disponible localmente
- âœ… **Staging**: https://stg.colombiansupply.com
- â³ **ProducciÃ³n**: Pendiente de completar Sprint 1

---

## ğŸ“ Notas TÃ©cnicas

### Stack Backend
- FastAPI
- PostgreSQL
- AutenticaciÃ³n JWT
- Servicio de email (SendGrid/AWS SES)

### Stack Frontend
- Next.js 14
- React 18
- TypeScript
- Tailwind CSS
- React Hook Form + Zod
- Zustand (manejo de estado)

### Endpoints de API
```
POST /api/auth/register
POST /api/auth/login
POST /api/auth/verify-email
POST /api/auth/forgot-password
POST /api/auth/reset-password
POST /api/auth/refresh-token
GET  /api/auth/me
```

---

## ğŸ¯ MÃ©tricas de Ã‰xito

- âœ… El usuario puede completar el registro en < 2 minutos
- âœ… Entrega de verificaciÃ³n de email < 1 minuto
- âœ… Tiempo de respuesta del login < 500ms
- âœ… Flujo de restablecimiento de contraseÃ±a < 3 minutos
- âœ… Cero vulnerabilidades de seguridad

---

## ğŸ”— DocumentaciÃ³n Relacionada

- [Referencia de API](https://api.colombiansupply.com/docs)
- [GuÃ­a de ImplementaciÃ³n de AutenticaciÃ³n](/docs/AUTH_IMPLEMENTATION.md)
- [Mejores PrÃ¡cticas de Seguridad](/docs/SECURITY.md)

---

**Ãšltima ActualizaciÃ³n**: 29 de diciembre, 2024  
**Estado**: âœ… Completo  
**Siguiente Sprint**: [Sprint 2 - Vendedores y CatÃ¡logo](?path=/docs/historias-de-usuario-sprint-2-vendedores--docs)

